modules-load.d(5)
==================

名称
--------

modules-load.d - 起動時にロードするカーネルモジュールの設定

書式
--------

| /etc/modules-load.d/\*.conf
| /run/modules-load.d/\*.conf
| /usr/lib/modules-load.d/\*.conf

説明
-----------

:doc:`systemd-modules-load.service.8` は上記のディレクトリのファイルに記述されているカーネルモジュールを静的なリストとして起動時にロードします。各設定ファイルは /etc/modules-load.d/*program*.conf という形式の名前を付けてください。静的な設定を使用する代わりに PCI ID, USB ID, DMI ID などのカーネルモジュールでエンコードされているトリガーによる自動ロードを使うほうが基本的には良いとされます。実際、新しいカーネルモジュールの多くは自動ロード対応です。

設定フォーマット
-----------------

設定ファイルにはロードしたいカーネルモジュールの名前のリストだけを指定します。カーネルモジュールの名前は改行で区切ってください。空行や # や ; から始まる行は無視されます。

設定ディレクトリと優先順位
----------------------------

設定ファイルは /etc/, /run/, /usr/lib/ のディレクトリから読み込まれます (優先度が高い順)。設定ディレクトリに保存する設定ファイルの名前は *filename.conf* という形式にしてください。/etc/ のファイルは /run/ や /usr/lib/ に存在する同名のファイルよりも優先されます。/run/ のファイルは /usr/lib/ に存在する同名のファイルよりも優先されます。

パッケージは設定ファイルをインストールするとき /usr/lib/ を使用してください。/etc/ のファイルはローカル管理者用であり、ディストリビューションが用意しているパッケージによってインストールされた設定ファイルを管理者が上書きできるようになっています。全ての設定ファイルは辞書順によってファイル名でソートされます。設定ファイルがどのディレクトリに存在するかは関係ありません。複数のファイルで同じオプションを指定した場合、辞書順で最後に来る名前のファイルのエントリが優先されます。ファイルの順番をわかりやすくするために、ファイル名には2桁の数字とダッシュを前に付けることが推奨されます。

ディストリビューションによって提供されている設定ファイルを管理者が無効化したい場合、/etc/ の設定ディレクトリにディストリビューションの設定ファイルとファイル名で /dev/null のシンボリックリンクを作成することを推奨します。ディストリビューションの設定ファイルが initrd イメージに含まれている場合、イメージを再生成する必要があります。

サンプル
----------

**例 1. /etc/modules-load.d/virtio-net.conf サンプル:**

.. code-block:: text

   # Load virtio-net.ko at boot
   virtio-net

関連項目
--------

:doc:`systemd.1`,
:doc:`systemd-modules-load.service.8`,
:doc:`systemd-delta.1`,
:doc:`modprobe.8`
